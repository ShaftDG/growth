!function(l){function e(e){for(var t,n,a=e[0],i=e[1],r=e[2],o=0,s=[];o<a.length;o++)n=a[o],d[n]&&s.push(d[n][0]),d[n]=0;for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(l[t]=i[t]);for(p&&p(e);s.length;)s.shift()();return u.push.apply(u,r||[]),h()}function h(){for(var e,t=0;t<u.length;t++){for(var n=u[t],a=!0,i=1;i<n.length;i++){var r=n[i];0!==d[r]&&(a=!1)}a&&(u.splice(t--,1),e=o(o.s=n[0]))}return e}var n={},d={0:0},u=[];function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return l[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=l,o.c=n,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var t=window.webpackJsonp=window.webpackJsonp||[],a=t.push.bind(t);t.push=e,t=t.slice();for(var i=0;i<t.length;i++)e(t[i]);var p=a;u.push([131,1]),h()}({131:function(e,t,n){n(132),e.exports=n(336)},334:function(e,t,n){},336:function(e,t,n){"use strict";n.r(t);n(334);var O=n(23);n(335);function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var L=function(){function o(e,t,n,a,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.numSegment=n||7,this.beginPoint=e||new BABYLON.Vector3(0,0,0),this.endPoint=t||new BABYLON.Vector3(0,50,0),this.distanceSprouts=a||.3,this.enableSprouts=!1,this.moveSprouts=!1,this.scene=r,this.start=!1,this.reverse=!1,this.index=0,this.time=0,this.intervalTime=i||.15,this.resetGrowth()}var e,t,n;return e=o,(t=[{key:"getPath",value:function(){return this.curve}},{key:"resetGrowth",value:function(){var e=this.endPoint.subtract(this.beginPoint).length(),t=new O.Path3D([this.beginPoint,this.endPoint]),n=t.getTangents(),a=t.getBinormals(),i=[],r=BABYLON.Matrix.RotationAxis(n[0],100*Math.random()),o=BABYLON.Vector3.TransformCoordinates(n[0].scale(.075*e).add(a[0].scale(e*O.Scalar.RandomRange(.04,.08))),r).add(this.beginPoint);i.push(o);for(var s=(1/7).toFixed(2),l=1;l<7;l++){var h=BABYLON.Matrix.RotationAxis(n[0],100*Math.random()),d=BABYLON.Vector3.TransformCoordinates(n[0].scale(e*l*s).add(a[0].scale(e*O.Scalar.RandomRange(.015,.03))),h).add(this.beginPoint);i.push(d)}var u=BABYLON.Matrix.RotationAxis(n[0],100*Math.random()),p=BABYLON.Vector3.TransformCoordinates(n[0].scale(.95*e).add(a[0].scale(e*O.Scalar.RandomRange(.04,.08))),u).add(this.beginPoint);i.push(p),this.totalLength=0;var c=[this.beginPoint].concat(i,[this.endPoint]),m=[];m.push(this.beginPoint);for(var g=1;g<c.length;g++)m.push(this.beginPoint);var B=O.Curve3.CreateCatmullRomSpline(m,this.numSegment),f=O.Curve3.CreateCatmullRomSpline(c,this.numSegment);this.points=B.getPoints(),this.pointsTemplate=f.getPoints(),this.path3d=new O.Path3D(this.points),this.path3dTemplate=new O.Path3D(this.pointsTemplate);for(var A=1;A<this.pointsTemplate.length;A++)this.totalLength+=this.pointsTemplate[A-1].subtract(this.pointsTemplate[A]).length();this.curve=this.path3d.getCurve(),this.index=1,this.start=!1}},{key:"startGrowth",value:function(){this.resetGrowth(),this.start=!0,this.moveSprouts=!0}},{key:"updatePath",value:function(e){if(this.start){var t=this.path3dTemplate.getTangents();if(this.index<this.pointsTemplate.length-1)if(.15<this.intervalTime){var n=this.pointsTemplate[this.index].subtract(this.pointsTemplate[this.index-1]).length(),a=this.points[this.index].subtract(this.points[this.index-1]).length();if(3<this.index&&this.index<this.points.length-4)this.points[this.index].subtract(this.points[this.index-1]).length()>this.distanceSprouts?this.enableSprouts=!0:this.enableSprouts=!1;if(a<n){var i=this.points[this.index].add(t[this.index].normalize().scale(e));if(i.subtract(this.points[this.index-1]).length()<n){console.log(i);for(var r=this.index;r<this.points.length;r++)this.points[r].addInPlace(t[this.index].normalize().scale(e))}else for(r=this.index;r<this.points.length;r++)this.points[r]=this.pointsTemplate[this.index].clone()}else this.index<this.pointsTemplate.length-1&&(this.index++,this.enableSprouts=!1)}else{for(r=this.index;r<this.points.length;r++)this.points[r]=this.pointsTemplate[this.index].clone();this.time<this.intervalTime?(this.time+=e,this.enableSprouts=!1):(this.index++,this.time=0,6<this.index&&this.index<this.points.length-7?this.enableSprouts=!0:this.enableSprouts=!1)}else this.start=!1,this.reverse=!0,this.points.reverse(),this.index=1;this.curve=this.points}}},{key:"updatePathReverse",value:function(e){if(this.reverse){this.path3dTemplate.getTangents();if(this.index<this.pointsTemplate.length-1)if(.15<this.intervalTime);else{for(var t=this.points.length-1;t>this.points.length-this.index;t--)this.points[t]=this.pointsTemplate[this.index].clone();this.time<this.intervalTime?this.time+=e:(this.index++,this.time=0)}else this.reverse=!1;this.curve=this.points}}}])&&a(e.prototype,t),n&&a(e,n),o}();BABYLON.Scene.prototype.showFPS=function(e){var n=(e=e||{}).ioSpeed||30,t=(e.location,{});e.offset=e.offset||{},t.x=e.offset.x||0,t.y=e.offset.y||0;e.font;var a=e.color||"rgba(180,180,180,0.65)",i=e.size||"12px",r=e.padding||"0.2em;",o=e.background||"rgba(10,10,10,0.65)",s=document.createElement("div");s.setAttribute("id","fps-block"),s.setAttribute("style","position:absolute;right: 0;top: 0;display:block;z-index:10001;font-family:Arial, Helvetica, sans-serif;pointer-events:none;color:"+a+";font-size:"+i+";padding:"+r+";background-color:"+o+";transform:translate("+t.x+","+t.y+");"),s.innerHTML="##&nbsp;fps",document.body.appendChild(s);var l=this._engine;return function e(){var t=document.getElementById("fps-block");t&&(t.innerHTML=l.getFps().toFixed()+" fps",setTimeout(function(){e()},1e3/n))}(),s};function v(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var x=[];window.addEventListener("DOMContentLoaded",function(){var e,m=((e=document.createElement("canvas")).id="renderCanvas",document.body.appendChild(e),e),A=new BABYLON.Engine(m,!0,{preserveDrawingBuffer:!0,stencil:!0}),t=function(){var g=new BABYLON.Scene(A),e=new BABYLON.ArcRotateCamera("Camera",0,0,.5,new BABYLON.Vector3(0,20,-20),g);e.setTarget(new BABYLON.Vector3(0,10,0)),e.attachControl(m,!1),g.showFPS();new BABYLON.HemisphericLight("light1",new BABYLON.Vector3(0,1,0),g);var t=BABYLON.MeshBuilder.CreateSphere("sphereLeft",{diameter:1,diameterX:1},g);t.position.x=-10,t.position.y=10,t.position.z=0;var n=BABYLON.MeshBuilder.CreateSphere("sphereRight",{diameter:1,diameterX:1},g);n.position.x=-t.position.x,n.position.y=t.position.y,n.position.z=t.position.z;BABYLON.Mesh.CreateGround("ground1",60,60,2,g);new BABYLON.StandardMaterial("myMaterial",g).diffuseColor=new BABYLON.Color3(.125,2,.25);var B=new BABYLON.PBRMaterial("tubeMaterial",g);B.metallic=.5,B.roughness=.5;var f,a=new BABYLON.AssetsManager(g);a.addTextureTask("textureAlbedo","/src/assets/textures/stem_baseColor.png").onSuccess=function(e){B.albedoTexture=e.texture,B.albedoTexture.uScale=2,B.albedoTexture.vScale=10,B.albedoTexture.wrapU=BABYLON.Texture.WRAP_ADDRESSMODE,B.albedoTexture.wrapV=BABYLON.Texture.WRAP_ADDRESSMODE},a.addTextureTask("textureBump","/src/assets/textures/stem_normal.png").onSuccess=function(e){B.bumpTexture=e.texture,B.bumpTexture.uScale=2,B.bumpTexture.vScale=10,B.bumpTexture.wrapU=BABYLON.Texture.WRAP_ADDRESSMODE,B.bumpTexture.wrapV=BABYLON.Texture.WRAP_ADDRESSMODE},a.addTextureTask("textureBump","/src/assets/textures/stem_ORM.png").onSuccess=function(e){B.metallicRoughnessTexture=e.texture,B.metallicRoughnessTexture.uScale=2,B.metallicRoughnessTexture.vScale=10,B.metallicRoughnessTexture.wrapU=BABYLON.Texture.WRAP_ADDRESSMODE,B.metallicRoughnessTexture.wrapV=BABYLON.Texture.WRAP_ADDRESSMODE,B.useRoughnessFromMetallicTextureGreen=!0,B.useMetallnessFromMetallicTextureBlue=!0},BABYLON.SceneLoader.OnPluginActivatedObservable.add(function(e){"gltf"===e.name&&e instanceof BABYLON.GLTFFileLoader&&(e.animationStartMode=BABYLON.GLTFLoaderAnimationStartMode.NONE,e.compileMaterials=!0,e.compileShadowGenerators=!0)}),a.addMeshTask("leaf","","/src/assets/models/","leaf.glb").onSuccess=function(e){e.loadedMeshes[0].position=new BABYLON.Vector3(0,10,0),(f=e.loadedMeshes[0]).setEnabled(!1)};for(var i=0;i<3;i++){var r=(Math.random()<.5?-1:1)*Math.random(),o=(Math.random()<.5?-1:1)*Math.random(),s=(Math.random()<.5?-1:1)*Math.random(),l=(Math.random()<.5?-1:1)*Math.random(),h=(Math.random()<.5?-1:1)*Math.random(),d=(Math.random()<.5?-1:1)*Math.random(),u=new L(t.position.subtract(new BABYLON.Vector3(1.5,0,0)).add(new BABYLON.Vector3(r,o,s).scale(.75)),n.position.add(new BABYLON.Vector3(1.5,0,0)).add(new BABYLON.Vector3(l,h,d).scale(.75)),8,.01,.01,g);x.push(u);var p=u.getPath(),c=BABYLON.Mesh.CreateTube("tube_"+i,p,.1,8,null,BABYLON.Mesh.NO_CAP,g,!0,BABYLON.Mesh.FRONTSIDE);u.diameter=BABYLON.Scalar.RandomRange(.015,.035),u.deltaMoveSprouts=.015,u.tube=c,u.sprouts=[],c.material=B}return g.registerBeforeRender(function(){var m=.01*g.getEngine().getDeltaTime();x.map(function(a,e){if(a.start){if(a.updatePath(m),a.enableSprouts){a.enableSprouts=!1;var t=f.clone(),n=a.index-1,i=new BABYLON.MorphTargetManager;t._children[0].morphTargetManager=i;var r=new BABYLON.MorphTarget("_"+(a.sprouts.length-1),1);r.setPositions.apply(r,v(f._children[0].morphTargetManager._targets[0]._positions)),r.setNormals.apply(r,v(f._children[0].morphTargetManager._targets[0]._normals)),r.setTangents.apply(r,v(f._children[0].morphTargetManager._targets[0]._tangents)),i.addTarget(r);var o=BABYLON.Scalar.RandomRange(.15,.5);t.scaling=new BABYLON.Vector3(o,o,o),t.position=a.points[n].clone(),t.lookAt(a.points[n-1].clone()),t.rotate(BABYLON.Axis.X,-BABYLON.Scalar.RandomRange(.25,.5),BABYLON.Mesh.LOCAL),t.rotate(BABYLON.Axis.Y,-BABYLON.Scalar.RandomRange(.1,.25),BABYLON.Mesh.LOCAL),t.rotate(BABYLON.Axis.Z,100*Math.random(),BABYLON.Mesh.LOCAL),t.directionIndex=n,t._children[0].material=f._children[0].material.clone(),t._children[0].material.albedoColor=new BABYLON.Color3(BABYLON.Scalar.RandomRange(.75,1),BABYLON.Scalar.RandomRange(.5,1.25),BABYLON.Scalar.RandomRange(.25,.5)),t._children[0].material.albedoColor=t._children[0].material.albedoColor.scale(BABYLON.Scalar.RandomRange(.5,2)),a.sprouts.push(t),t.animationGroup=new BABYLON.AnimationGroup("animationGroupLeaves_"+(a.sprouts.length-1));var s=g.animationGroups[0].targetedAnimations[0].animation.clone(),l=t._children[0].morphTargetManager.getTarget(0);s.name+="_"+(a.sprouts.length-1),t.animationGroup.addTargetedAnimation(s,l),t.animationGroup.start(!1,BABYLON.Scalar.RandomRange(15*m,20*m),0,2)}var h=a.getPath(),d=g.getMeshByName("tube_"+e);d&&d.dispose();var u=BABYLON.Mesh.CreateTube("tube_"+e,h,a.diameter,8,function(e,t){return t<=a.totalLength/10?t*a.diameter:t>a.totalLength/10&&t<=a.totalLength/1.1?a.totalLength/10*a.diameter:(a.totalLength-t)*a.diameter},BABYLON.Mesh.NO_CAP,g,!0,BABYLON.Mesh.FRONTSIDE);(a.tube=u).material=B}else if(a.reverse){a.updatePathReverse(m);var p=a.getPath(),c=g.getMeshByName("tube_"+e);c&&c.dispose(),u=BABYLON.Mesh.CreateTube("tube_"+e,p,a.diameter,8,function(e,t){return t<=a.totalLength/10?t*a.diameter:t>a.totalLength/10&&t<=a.totalLength/1.1?a.totalLength/10*a.diameter:(a.totalLength-t)*a.diameter},BABYLON.Mesh.NO_CAP,g,!0,BABYLON.Mesh.FRONTSIDE),(a.tube=u).material=B,a.sprouts[a.index-1]&&(a.sprouts[a.index-1].animationGroup.isPlaying?a.sprouts[a.index-1].animationGroup.dispose():(a.sprouts[a.index-1].animationGroup.start(!1,-BABYLON.Scalar.RandomRange(25*m,35*m),2,0),a.sprouts[a.index-1]._children[0].material.albedoColor=new BABYLON.Color3(BABYLON.Scalar.RandomRange(5.5,7.5),BABYLON.Scalar.RandomRange(.75,1),BABYLON.Scalar.RandomRange(.35,.5)),B.albedoColor=new BABYLON.Color3(BABYLON.Scalar.RandomRange(1.5,2.5),BABYLON.Scalar.RandomRange(.75,.8),BABYLON.Scalar.RandomRange(.35,.5))))}a.moveSprouts&&a.sprouts.map(function(e){if(e.directionIndex&&e.directionIndex<a.points.length-1){var t=a.points[e.directionIndex+1].subtract(a.points[e.directionIndex]).normalize(),n=a.points[e.directionIndex+1].subtract(a.points[e.directionIndex]).length();e.position.subtract(a.points[e.directionIndex]).length()<n?a.start?e.position.addInPlace(t.scale(m*a.deltaMoveSprouts)):0<a.deltaMoveSprouts?(a.deltaMoveSprouts-=5e-5*m,e.position.addInPlace(t.scale(m*a.deltaMoveSprouts))):(a.moveSprouts=!1,a.deltaMoveSprouts=.015):e.directionIndex<a.points.length-1&&e.directionIndex++}})})}),g.actionManager=new BABYLON.ActionManager(g),g.actionManager.registerAction(new BABYLON.ExecuteCodeAction({trigger:BABYLON.ActionManager.OnKeyDownTrigger,parameter:"w"},function(e){x.map(function(e){e.sprouts.map(function(e,t){e.dispose(),e.animationGroup.dispose()}),e.sprouts=[],e.startGrowth()})})),a.load(),g}();t.executeWhenReady(function(){x.map(function(e){e.startGrowth()}),A.runRenderLoop(function(){t.render()})}),window.addEventListener("resize",function(){A.resize()})})}});